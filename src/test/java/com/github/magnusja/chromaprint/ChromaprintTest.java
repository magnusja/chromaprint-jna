package com.github.magnusja.chromaprint;

import org.junit.Assert;
import org.junit.Before;
import org.junit.Test;

import javax.sound.sampled.AudioInputStream;
import javax.sound.sampled.AudioSystem;
import java.net.URL;
import java.util.HashMap;
import java.util.Map;

/**
 * Created by magnusja on 08/07/17.
 */
public class ChromaprintTest {

    private static Map<URL, String> tests = new HashMap<URL, String>();

    @Before
    public void setUp() throws Exception {
        tests.put(new URL("http://www.music.helsinki.fi/tmt/opetus/uusmedia/esim/a2002011001-e02.wav"), "AQABoQo13piP3obVPUg-5DnO49TRHD96Bk2VDzty7tB5VKZwxO5I4Pjxw8c__ODhF-PhHx1DnDnxF8-M6UUPPcUF_xHuDM8UcMJxBtlzJGGio-WH5sUzoY90lDoeJcSuNMGvgImQRFyKWOFxPSia48nxB7dxJUyDwy8iJMlxSUlQJcp09Mxx4o9C_Njeg9cxivKh5mkK8_jhkd-C489w50OVmUi4HCF5HB-uY1-CbAl1KNL-4Dlw7Pjx4XCiQ6McHPnBKwd2fD4uNDmT4KmiID2SwwuP80ngHsUVoj-aIA91JHU-Y0d_-BGO4z9w5fjgvuAHp0cbkN4x6kcfGv7R3NBTXEeTP4nwScYfF-VyHI9CYn4hPfgOH9eJR7PAGleIHw8lTGtGGWEeJN3x4A_hl_jxzcQf_JmCc0fDMah-5Ejyo3uC_ygfHH-G-SKapAyq77hyJEf-47jUpsJz4z_-BP_RPEj2G--O-7hq7E9ILA8qsQ7EaS9-_Ljgbsd-vCr2K1CPNGFQH8-DH8dxEleC87g6NIlUpjgU8gK1PsK9S9h2VDm-4DySxwnSNfLx4cpzfHvwHBWN92jK5MiVI6nkPHg4qng_PCmaONEi1FKO46M2PM9wSUj_GK8HPcdDqPyDPMxx7sOF5kN_5A-eK9CpjcgnJMt1hBeeDPqHPQPPMPjR6EN_PMfx5NClBF_24Mcf9MrRPAMfjIZufLFxPkO3Ef5R6eLxfMGHy_BZPO-QLBGlWEOoLEtcHM2P6aDZJVCe6XDF47jz4oeXBZdQM_hRpUdyEfmN-viO99jxC84FJ_VRfhaO64T2ZcrQnA947MZ1_JKOLgyRfkiYE-3l4Bf-4CqaF31wXohfHbKPcduJXiryHThx4cfWH0-CY-PxgqPComFykN7xY0o--OihW3hyOGcy_GZwLjGOR8GPhwn0YvrRlMejFreOHw_xPPiH6VmQLNGRh09woflC9MM__BvuhMKjNAP8Hkdk5tB-5KXxHyfKOMep48WkxyGsHlcVfND4B_9x4rlT_Pg_PH3QH-kLrcddHD_2HZySo8sF5Qm6Zocm_QBhlOASGAIQpUIQJYSAwiKkrESAIaSAUoQAygQjSCBI1AVKCUgEkMQAR5BRjkCDiAMECCEME0QBJZgAwCKAFANIEO4YM0IARtEwDgTBHCIEGcMNIBARo5CgQACvCCAHGaKIAQAxYQSQiiAFiADCOeOwE4gBBqCAiIEGgFOMESKMMUYYBYBAwjDjAGOICcEMAQQAxBQyCAlCELACAKWgMY5ACBQi4hFAhGlIEYAZJQAQYohgwAIABFLUCoCEIMJRqBBhQADAmANAGCKYEsIowoABwFkkAKHKCMEkKwIZQpyABCECADFACmAIQYIQJJh0QimAkGVWYKMMM5RYjSRRwhBBgCBHCyAEAYA4RxgQxBEgiFKMeweAUogxaAgH4BJklACAEIooJ84wYAx1EAglhCBcKKeAIg4gQ4QCQCCnCATHACMQAooQgBQADiglAEKOCeW4c8Qw");
        tests.put(new URL("http://www.music.helsinki.fi/tmt/opetus/uusmedia/esim/a2002011001-e02-16kHz.wav"), "AQABoQo13piP3obVPUg-5DnO49TRHD96Bk2VDzty7tB5VKZwxO5I4Pjxw8c__ODhF-PhHx1DnDnxF8-M6UUPPcUF_xHuDM8UcMJxBtlzJGGio-WH5sUzoY90lDoeJcSuNMGvgImQRFyKWOFxPSia48nxB7dxJUyDwy8iJMlxSUlQJcp09Mxx4o9C_Njeg9cxivKh5mkK8_jhkd-C489w50OVmUi4HCF5HB-uY1-CbAl1KNL-4Dlw7Pjx4XCiQ6McHPnBKwd2fD4uNDmT4KmiID2SwwuP80ngHsUVoj-aIA91JHU-Y0d_-BGO4z9w5fjgvuAHp0cbkN4x6kcfGv7R3NBTXEeTP4nwScYfF-VyHI9CYn4hPfgOH9eJR7PAGleIHw8lTGtGGWEeJN3x4A_hl_jxzcQf_JmCc0fDMah-5Ejyo3uC_ygfHH-G-SKapAyq77hyJEf-47jUpsJz4z_-BP_RPEj2G--O-7hq7E9ILA8qsQ7EaS9-_Ljgbsd-vCr2K1CPNGFQH8-DH8dxEleC87g6NIlUpjgU8gK1PsK9S9h2VDm-4DySxwnSNfLx4cpzfHvwHBWN92jK5MiVI6nkPHg4qng_PCmaONEi1FKO46M2PM9wSUj_GK8HPcdDqPyDPMxx7sOF5kN_5A-eK9CpjcgnJMt1hBeeDPqHPQPPMPjR6EN_PMfx5NClBF_24Mcf9MrRPAMfjIZufLFxPkO3Ef5R6eLxfMGHy_BZPO-QLBGlWEOoLEtcHM2P6aDZJVCe6XDF47jz4oeXBZfQB_9RpUdyEfmN-viO99jxC84FJ_VRfhaO64T2ZcrQnA947MZ1_JKOLgyRfkiYE-3l4Bf-4CqaF31wXohfHbKPcduJXiryHThx4cfWH0-CY-PxgqPComFykN7xY0o--OihW3hyOGcy_GZwLjGOR8GPhwn0YvrRlMejFreOHw_xPPiH6VmQLNGRh09woflC9MM_fMPlhMKjNAPM9UBkBtppIe_x57hQZtLxC8ekxyGsHlcVfND4B_9x4rlT_Pg_PH3QH-kLrcddHD_2HZySo8sF5Qm6Zocm_QBhlOASGAIQpUIQJYSAwiKkrESAIaSAUoQAygQjSCBI1AVKCUgEkMQAR5BRjkCDiAMECCEME0QBJZgAwCKAFANIEO4YM0IARtEwDgTBHCIEGcMNIBARo5CgQACvCCAHGaKIAQAxYQSQiiAFiADCOeOwE4gBBqCAiIEGgFOMESKMMUYYBYBAwjDjAGOICcEMAQQAxBQyCAlCELACAKWgMY5ACBQi4hFAhGlIEYAZJQAQYohgwAIABFLUCoCEIMJRqBBhQADAmANAGCKYEsIowoABwFkkAKHKCMEkKwIZQpyABCECADFACmAIQYIQJJh0QimAkGUGAYGNMsxQYjWSRAlDBAGCHC2AEAQA4hxhQBBHgCBKMe4dAEohxqAhHIBLkFECAEIoopw4w4Ax1EEglBCCcKGcwsAhAQwASCqCwTHACISAIgQgBYADSgmAkGNCOe4cMQw");
        tests.put(new URL("https://ccrma.stanford.edu/~jos/wav/pno-cs.wav"), "AQAAjEnCNrnQHCFvPLmCy5ky8Db8BzfONEcc72BIBVqWHsf_wRwT4rrhZ5GCTwkVPHAe4ePxJMI_9JCS58F9YveJL8d_dB8aXriC73hytEczHk_wHT_84sdzNOgpCqOeR5A1DRyNKzqO80Tf4YuM5tGDN4eaZCz-EH6Ogxd-vDWY5EuCKvqhKzm-wd_wBU1e9HiUE3pE_EOaJ8Sd4F-E8wLDLF_QHHmOJkyYglG2EVquGD0e_A8ePcJpB5ry6GiuH0-CP0eebwqe7UGTtsipEL3wPIEu4wua5KiYR2i6QZOzNMH5Ix2FazmuC_xy1I7RLOPBOcdzJ2hSXSiPPw9uwUcuKQ_OiMeT_BDHIw-OK-Cz48zxBaceIm24RWBFsaC5QH9w_OiTemhi4fnQOvAYBr4OAZQRhCiAAGIOFEEUAMZZBAhDCgFiACCICASASAZJQZGwQAJFmDBAEAcaMEwIIIgDBCoICFMEGESY4EARCowAgigBPQCGEAKQAIQAABgRQABADCGMOYiIEYIBAARAggBtgCHGAAAAQMKDZhgRhgjgwDVAIIIA");
        //tests.put(new URL("http://www.ee.columbia.edu/~dpwe/sounds/music/africa-toto.wav"), "AQADtLGkJIq0JBEaLkOfxcHxC-uhdRE-PGjs40e_Ywqf48J1dCeO-_jRPNAPNORy9DuO88IeaF0OPEcj-jha7pjyHBcuHT1x_LiPxg2Ew3yOHz9-rHKgPfiHH43YAP2OKXyOC5eOnrhw8_jRPNDxw4-D41h5_ISuoD-s7UX4HC-P8ENTKg--Hzq-Iu_R87B_1DcecBdyDsqeI0cXKTrsHr6Uw2OGdsyFM8edCM0zhJS-oG-oQ0tt4fCPJ8eN_4N46EoHU9rxNcmh_UJz6DoaqjE-WO2F6kSY86gnbsWu4uxxcE9RkvCr7MjHI5TwI3ag5VKQ5SgZHZderMS3wHzQNbvwialxo7GOPJsC34Z_9GSgL8Iuo9nSow_yo0czMhz-I9-hHydTPAh7w3E8hLcOnR6YZ0eY3qh9wh-OVzi-G5WJK8giQ8sTBdGPWrEHb1EPt4nReUezJ0QbSceXHEf1ZUaYOyrKh8FN1MoC_bjRaItyVCceCc6xVyFeaJse4RE0_-Dx8BkaGaGmHnuOWtzhH49ePB2O7Qfq9Hic40cWORC_I2eOrTq6o3cOT8vxo9lT4wr-HH0yCuFDqfhROTvR1MH94Gh0VMe4o-kU9KWKS0R_PIuO82iXQzXBxJoRvsPRLhSNreLx4rPg7A_CH4dOHV-GR6mh0bqCJzvC43fRFU104tESXLsURPsC6SfC2MJkpTjxND-qC1d3eMrR73iO_8iNUgkPh46g9MgPhi8iKjz0C02o2EQjRjpinC-aZVlVhNDz4GyG5spROSqNJ4rwQ0eYh8ZP2I12lPLRH00VHo-NU4mFvMuR3MeU7EXZg7EaovGDH9tlDnmQ9Ee35bhy9EUp5WicD3-PHz3CfDv0REJkbWFA8cNJ5ei6GEwe5EKyMJJy9MlRH82L6buC5g1xbkFyRHryoaGTLQVraSEeY2xRJU_w7DhjeHIRPjpxPcEZPAnel8EraDm0j42KL0lWHBNJQ_IxkXhKESfLoM9uNCVx_Cme9Sn0PHjQ9KiYH_90lLwwHX8hzbmCKceVNEV-ePNR78bP4heqL4WvI5dhSkoKjeJx6Fli5MelbcqG67iU66h4NPoQV4dO5LMxM0dzxQJjSbiSHU1cCWuOZMkz5MN5NIySBz56KSMuymicT6hP5JWhIcyLPSPOgEnUo0-SgvwRlkiyt-iWHzXR57jGo095NJF-HMl7hJmVouU3zE9CXCqYdIuKUPQHRUqYcEF-3DgnXBT8PUh5JGMn_D-exoLrBw8VccGeCCxdPEfk5YPmu0if43lxKrFgH57QI8_wnMjzEv0RS8cPMcf0QfoxCY-UGaE25vge4cmL5kxs9PSQ64Kuo1dKTPnwFNxzyAzyLMf1TEH_4SeaHo-OizxeBQ-VI_yRLHtwZeRwHdPSw0eTi7iC3CySK8eV0cIfo8p-2CFqZcGpBJdyJF-OaDg7MM8VMMm1oGsWNJeQT0dyEc3No5j6w2_h-uhzIqkzhD-mcFEy4Zs04QdXWTtejAlTIuyYIeH8EP2Sx7iN58V7_IjTE0kf-IlxikoiXDn6o0f0UZD-CNGTF18E5zniMNOhy8jzUETJvPCPXsvxH82YHWHjDBqPMK-C58lQG4-4ow-eDVcrTGnCLagshXiP55kO0ruC-sIUI8-PWdnADztCUh-qHVeS46pRMnC2Dz1zITegK0Tz4y9c6kb7B80XaPrxo1oSBn7QPyiNSwkPPwy06Q-Ov2jCLUXo7MbuIw_-E9InIz8eEn-whfKDPBf6Q0so5FGMJg9KHvmU4zt05cOPXMcnIkyOWpnxSTlsHfmKnviPncqH30RmzoF4RD56Gk1jE_Vx9EQTUcKF0JWQcEoSUfCFD1N2fDkD9ilGJnzhZDhzvPjxaQ--IgwjKTq0TwgfMoP7DW-P5niQ5wt0mSoiimmHnobzwM9BHvmg60KuLfhizPmFJ4N79A1qnfBVXGRCNDxyFn26Q0sn5FWyCDNzgbuMRp4xmjGeN7hy4b5whhHC4yLOFvdxh2jGB9WP-_gfvMKT4WgO7Ud1-JLx0vglBs-iEi-hfEkOVwGP78E4ZhAn0cNZE7nCH-cRKTv-QGf0ITRMEbySD87xY4pME99wiR56NBXuDfGiaMf5Qua0EX3QPDteGl909KjGUfgx6tD1QzueJXiY44TecJApmBH-gs9xMtagg9Vy5KC40HgOjx-6JrrwlvhxH7lIChIzLUeYXqh-4yZ6ogyj4Prx6g2ujUiTMoZuHWHzY8oePD9-9PB-3IlS5Il3QrOOJz_-MIf6I8yjYyKFJ-B_zMwV4WSm4Q4RaSWS5QmP78KnNceU5wsu4dFy5BKRrA9Oo3l2dJGkpMST4GjGoNZNPPjRHLmWKNBtPCEu4bvgF7WC94Fe1JoOYS9SRjqqn8VxFs1z9Awu6fhDVD8aTTnyQ9NxsvCLPsKuB1fsI26yOCglBp7l4orQxjnxJccp4b_QjDnCsxE0O4apfUXzKHgoQ_9xbSrSRpKF42SQHvpxqUYkVRGMMzsO5jm-HPnRG4ryIG614Tuq_PAT9EqDD_mRrOuFZu2Ovh3cE33QxAnRtcfJHNcRbceDPlmQJZWkZdgjZhrCxCaqHLpGhIweuKYMnzn-w3pRSfKFNpku-ImKiNtByYuDSRvJIMfVH-EjHf5R28Yf6BfyZVTwBw4uJcG1CNeDPIf-DdEflFKGKx8-fnCOif_xJN0RHcmdBE_kDUzyGN11TN4PU8zxH030QHUCIZUinAlBCADCGUakQE4hwwABUigGmBEUIOEEU9IhoUgAFEijlGDCKQKAcIIpKYBTyBiIqFkGEAGNEkAQgYgARRAhlCBUEISUMcAJQhAwADiFmGFCAECAEAIJQpAAAChCnAGCEASAMkghQQSlEgFFgBOKQCKIUUYR4gQQSBBgBAcUKQgAAFAgoihAAgjGBFAAKMYAMAoAhJAiRiAHMDGAIQIEYwIwZqRAwBCgkBIEYAqlIAQKx4BhyAEhgJCEQGIAAwwAZhQQRBAACEDAGsCUEc4CCBgxTAhikGHECCARcEgQQYECgADAlGKWKEIQgEwIBARThBCEgAASAOkUAQCYIZgwhBnADAEAUAcQ2QAAwIogAhmqABFGECuMoIgAQIAQDAAiAEDAAKMIEMRIoggxwhpFqLGCAGCBYYoQBgBQRABBgHFGAMAIAZYQQTgQBACAjCFGCAoEkEJRQwRQQDBrDBWACEaAQIQgI6AhggAiDBUISeCMIEQJZJChwjmiABEKYAaQI0I4QJABQBhBgBGUMAMYEYAYRhgSACLEAJEKAEIMBhQxAQBSACjAgFNOIKQIIYgAApQAxjCDCEFGACMUAUgAIQgTBCABHAAADEIAkAYggJCBBCgikTIIEMIIYQhop4wwTgCghBBECaEYochRY4RggEKHAEFEAKCsUYQII4xVBgoGAFPAWAANAMRIwghCgBEmEVEIUAEMAIAcxBgQAhimDMMOCAMAAw4YIYBwVAECCCKMASAI5M4YA4RSwjAkDKEELKmoAsgRAoxQwDBBCAEAAcWEVAogJAQAgDAElCDAAAAMUEAQAABzRgDCkDKAAYKsoJQAQCgzRAliiGFAKAaYII4AgRTxDChhkCAOEAWEAUAIYRABhBUhACEABuKUYgQZRBQgSjoABKEMOCUEAQYABAQA0BhgrCdAACeMQ8ARBARiRglhDCLCKEAAQEIAZoAAAgBABA");
        //tests.put(new URL("http://www.music.helsinki.fi/tmt/opetus/uusmedia/esim/a2002011001-e02-ulaw.wav"), "AQABoQo13piP3obVPUg-5DnO49TRHD96Bk2VDzty7tB5VKZwxO5I4Pjxw8c__ODhF-PhHx1DnDnxF8-M6UUPPcUF_xHuDM8UcMJxBtlzJGGio-WH5sUzoY90lDoeJcSuNMGvgImQRFyKWMmOPyia48nxB7dxJUyDwy8iJMlxSUlQJcp09Mxx4o9C_Njeg9cxivKh5mkK8_jhkd-C489w50OVmUi4HCF5HB-uY1-CbAl1KNL-4Dlw7Pjx4XCiQ6McHPnBKwd2fD4uNDmT4KmiID2SwwuP80ngHsUVoj-aIA91JHU-Y0d_-BGO4z9w5fjgvuAHp0cbkN4x6kcfGv7R3NBTXEeTP4nwScYfF-VyHI9CYn4hPfgOH9eJR7PAGleIHw8lTGtGGWEeJN3x4A_hl_jxzcQf_JmCc0fDMah-5Ejyo3uC_ygfHH-G-SKapAyq77hyJEf-47jUpsJz4z_-BP_RPEj2G--O-7hq7E9ILA8qsQ7EaS9-_Ljgbsd-vCr2K1CPNGFQH8-DH8dxEleC87g6NIlUpjgU8gK1PsK9S9h2VDm-4DySxwnSNfLx4cpzfHvwHBWN92jK5MiVI6nkPHg4qng_PCmaONEi1FKO46M2PM9wSUj_GK8HPcdDqPyDPMxx7sOF5kN_5A-eK9CpjcgnJMt1hBeeDPqHPQPPMPjR6EN_PMfx5NClBF_24Mcf9MrRPAMfjIZufLFxPkO3Ef5R6eLxfMGHy_BZPO-QLBGlWEOoLEtcHM2P6aDZJVCe6XDF47jz4oeXBZdQM_hRpUdyEfmN-viOucfxC84FJ_VRfhaO64T2ZcrQnA947MZ1_JKOLgyRfkiYE-3l4Bf-4CqaF31wXohfHbKPcduJXiryHThx4cfWH0-CY-PxgqPComFykN7xY0o--OihW3hyOGcy_GZwLjGOR8GPhwn0YvrRlMejFreOHw_xPPiH6VmQLNGRh09woflC9MM__BvuhMKjNAP8Hkdk5tB-5KXxHyfKbDnu48WkxyGsHlcVfND4B_9x4rlTnMc_PH3QH-kLrcddHD_2HZySo8sF5Qm6Zocm_QBhlOASGAIQpUIQJYSAwiKkrESAIaSAUoQAygQjSCBI1AVKCUgEkMQAR5hRjkCDiAMECCEME0QBJZgAwCKAFANIEO4YM0IARtEwDgTBHCIEGcMNIBARo5CgQACvCCAHGaKIAQAxYQSQiiAFiADCOeOwE4gBBqCAiIEGgFOMESKMMUYYBYBAwjDjAGOICcEMAQQAxBQyCAlCELACAKWgMY5ACBQi4hFAhGlIEYAZJQAQYohgwAIABFLUCoCEIMJRqBBhQADAmANAGCKYEsIowoABwFkkAKHKCMEkKwIZQpyABCECADFACmAIQYIQJJh0QimAkGVWYKMMM9SCJIkShggCBDlaACEIAMQ5woAgjgBBlGLcOwCUQoxBQzgAlyCjBACEUEQ5cYYBY6iDQCghBOFCOQUUcQAZIhQAAjlFIDgGGIEQUIQAoJwDSgmAkGNCOe4cMQw");
    }

    @Test
    public void calculateFingerPrint() throws Exception {
        for(Map.Entry<URL, String> entry : tests.entrySet()) {
            URL url = entry.getKey();
            String hash = entry.getValue();
            AudioInputStream is = AudioSystem.getAudioInputStream(url);
            Chromaprint chromaprint = new Chromaprint(is);
            Fingerprint fingerprint = chromaprint.calculateFingerPrint();
            Assert.assertEquals(hash, fingerprint.getString());
        }
    }

}